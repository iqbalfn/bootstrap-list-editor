/*!
  * Bootstrap List Editor v0.0.3 (https://iqbalfn.github.io/bootstrap-list-editor/)
  * Copyright 2020 Iqbal Fauzi
  * Licensed under MIT (https://github.com/iqbalfn/bootstrap-list-editor/blob/master/LICENSE)
  */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("jquery")):"function"==typeof define&&define.amd?define(["exports","jquery"],t):t((e=e||self)["bootstrap-list-editor"]={},e.jQuery)}(this,function(e,_){"use strict";_=_&&_.hasOwnProperty("default")?_.default:_;var l={editor:null,list:null,model:null,items:{title:"title",info:[],action:[]}},t=function(){function e(e){this._config=this._getConfig(e),this._value="[]",this._el={editor:document.querySelector(this._config.editor),list:document.querySelector(this._config.list),model:document.querySelector(this._config.model)},this._activeIndex=null,this._addElementsListener(),this._redrawItems()}var t=e.prototype;return t._addElementsListener=function(){var o=this;this._el.model.addEventListener("change",function(e){return o._redrawItems()}),this._el.editor.addEventListener("submit",function(e){e.preventDefault();for(var t={},i=null,n=0;n<o._el.editor.elements.length;n++){var l=o._el.editor.elements[n];"button"!==l.type&&(t[l.name]=l.value,l.value="",i=i||l)}o._activeIndex?(o._value[o._activeIndex]=t,o._el.model.value=JSON.stringify(o._value),o._redrawItems()):(o._drawItem(t,o._value.length),o._updateModel()),o._activeIndex=null,i&&i.focus()}),_(this._el.list).on("click",".btn-remove",function(e){e.preventDefault();var t=e.target.closest(".list-editor-item");_(t).slideUp(function(e){_(t).remove(),o._updateModel()})}).on("click",".btn-edit",function(e){e.preventDefault();var t=e.target.closest(".list-editor-item"),i=JSON.parse(t.dataset.object);o._activeIndex=t.dataset.index;for(var n=null,l=0;l<o._el.editor.elements.length;l++){var s=o._el.editor.elements[l];"button"!==s.type&&(s.value=i[s.name]||"",n=n||s)}n.select(),_("html, body").animate({scrollTop:_(o._el.editor).offset().top})})},t._drawItem=function(l,e){var s=this,t=this._hs(JSON.stringify(l)),i=l[this._config.items.title],o=[];this._config.items.info.forEach(function(e){if(l[e.field]){var t=s._hs(e.title),i=s._hs(l[e.field]),n='\n                <span title="'+t+'">\n                    '+(e.icon||"")+"\n                    "+i+"\n                </span>";o.push(n)}}),o=o.join("&middot;");var n=[];for(var r in this._config.items.action){var a=this._config.items.action[r],d="btn-"+r,u=a.icon||"",c='\n                <a href="#0" class="btn btn-secondary '+d+'" title="'+this._hs(a.title||"")+'">\n                    '+u+"\n                </a>";n.push(c)}var f='\n            <li class="list-group-item list-editor-item" data-object="'+t+'" data-index="'+e+'">\n                <div class="d-flex w-100 justify-content-between">\n                    <h5 class="mb-1">'+i+'</h5>\n                    <div>\n                        <div class="btn-group btn-group-sm" role="group" aria-label="Action">\n                            '+(n=n.join(""))+"\n                        </div>\n                    </div>\n                </div>\n                <small>"+o+"</small>\n            </li>";_(this._el.list).append(f)},t._getConfig=function(e){var t={};for(var i in l)if("items"===i){if(t[i]={},e[i])for(var n in e[i])t[i][n]="undefined"==typeof e[i][n]?l[i][n]:e[i][n]}else t[i]="undefined"==typeof e[i]?l[i]:e[i];return t},t._hs=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},t._redrawItems=function(){var i=this;this._value=this._el.model.value;try{this._value=JSON.parse(this._value)}catch(e){this._value=[]}this._el.list.innerHTML="",this._value.forEach(function(e,t){return i._drawItem(e,t)})},t._updateModel=function(){for(var e=[],t=0;t<this._el.list.children.length;t++){var i=this._el.list.children[t];e.push(JSON.parse(i.dataset.object))}this._value=e,this._el.model.value=JSON.stringify(e)},e}();window.ListEditor=t,e.ListEditor=t,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=bootstrap-list-editor.min.js.map